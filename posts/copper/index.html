<!DOCTYPE html>
<html>

<head>
  

  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Copper (Darwin 8.0.1)  &middot; cloud daydreams</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="canonical" href="https://arrjay.github.io/posts/copper/">
  
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
  <div class="navbar">
    <ul>
      <li><a href="/" class="logo-title">INDEX</a></li>
      <li><a href="/categories">CATEGORIES</a></li>
      <li><a href="/tags">TAGS</a></li>
    </ul>
  </div>
  <div class="container">
    <div class="title">
      <a href="/">
        <img src="/images/logo.png" width="260px" height="48px" />
      </a>
    </div>


<a href="https://arrjay.github.io/posts/copper/">
  <div class="post-title">
    <img src="/images/post-title-icon.png" />
    <div class="post-meta">
      <time>10 Jul 2014, 23:31</time>
      <h1>Copper (Darwin 8.0.1)</h1>
    </div>
  </div>
</a>

<div class="post-toc">
  <span class="title">
    Table of contents
  </span>
  <nav id="TableOfContents">
<ul>
<li><a href="#installing-darwin-8-0-1-as-a-vm">Installing Darwin 8.0.1 as a VM</a>
<ul>
<li>
<ul>
<li><a href="#esxi-configuration">ESXi configuration</a></li>
<li><a href="#boot-pass-1-drop-to-shell">Boot pass 1 - drop to shell</a></li>
<li><a href="#boot-pass-2-install">Boot pass 2 - install</a></li>
</ul></li>
<li><a href="#optional-steps">Optional Steps</a>
<ul>
<li><a href="#nis-configuration">NIS Configuration</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
</div>

<section class="post-content">
  

<h1 id="installing-darwin-8-0-1-as-a-vm">Installing Darwin 8.0.1 as a VM</h1>

<p>Copper is an installation of Darwin 8.0.1. Installing Darwin is&hellip;finicky.</p>

<p>Avoid installing to ufs, that seems to work very poorly.</p>

<h3 id="esxi-configuration">ESXi configuration</h3>

<ul>
<li>Virtual Machine - version 8 Hardware</li>
<li>Hard disk 1 should be attached to IDE bus (0:0)</li>
<li>768MB of RAM seems to be plenty.</li>
<li>E1000 ethernet adapter works here as well.</li>
<li>For Guest OS I selected Other (FreeBSD (32-bit))</li>
<li>Once up and running, you probably want to tweak settings to always boot from CD first - simply disconnect from image when we&rsquo;re done.</li>
</ul>

<h3 id="boot-pass-1-drop-to-shell">Boot pass 1 - drop to shell</h3>

<ul>
<li>initialize the partition table manually here using fdisk - &lsquo;fdisk -i -a hfs /dev/rdisk0&rsquo; is what I did</li>
<li>type exit at this point and the system will attept to reboot (actually shuts down for me)</li>
</ul>

<h3 id="boot-pass-2-install">Boot pass 2 - install</h3>

<ul>
<li>select your drive (1) to install on to, choose to use existing partitions</li>
<li>root partition should be /dev/disk0s1 at this point - format as hfs and do a clean install</li>
<li>install should proceed at this point.</li>
<li>at the end, you are asked to seet a root password and hostname for the system.</li>
<li>select 2 to attempt reboot (shutdown in my case) - you can disconnect the cdrom at this point.</li>
</ul>

<h2 id="optional-steps">Optional Steps</h2>

<p>Enable ssh by running &lsquo;service ssh start&rsquo;. This will persist across reboots.</p>

<p>To actually configure static networking for ethernet devices use ncutil. 3.1.3 won&rsquo;t run at all on an unpatched darwin, 3.0b1 will run, and just dump a lot of localization errors. &lsquo;[0 ]$&rsquo; is the ncutil prompt in the below session.</p>

<pre><code># ncutil
[0 ]$ create-location Standard
[14 Standard]$ ls
[...] (&lt;- find the ethernet adaptor device here)
[14 Standard]$ cd 30
[30 Ethernet Adaptor (en0)]$ setprop IPv4 method Manual
[30 Ethernet Adaptor (en0)]$ setprop IPv4 ip-address 10.100.252.5
[30 Ethernet Adaptor (en0)]$ setprop IPv4 subnet-mask 255.255.255.0
[30 Ethernet Adaptor (en0)]$ setprop IPv4 router 10.100.252.1
[30 Ethernet Adaptor (en0)]$ setprop DNS name-server 10.100.252.2
[30 Ethernet Adaptor (en0)]$ cd /
[0 ]$ setprop . CURRENT-LOCATION Standard
[0 ]$ exit
# scutil --set HostName copper
</code></pre>

<p>(edit /etc/hostconfig, add HOSTNAME=copper)
<code># shutdown -r now</code></p>

<pre><code># scutil
&gt; open
&gt; get State:/Network/Global/IPv4
&gt; d.show
(read PrimaryService GUID)
&gt; d.add DomainName j.hack
&gt; set State:/Network/Service/(GUID)/DNS
&gt; quit
</code></pre>

<h3 id="nis-configuration">NIS Configuration</h3>

<ul>
<li>set NISDOMAIN=j.hack in /etc/hostconfig and reboot</li>
</ul>

</section>

<div class="share">
  <a href="http://www.facebook.com/sharer.php?src=bm&u=https%3a%2f%2farrjay.github.io%2fposts%2fcopper%2f&t=Copper%20%28Darwin%208.0.1%29" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-facebook"></i></a>
  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2farrjay.github.io%2fposts%2fcopper%2f&text=Copper%20%28Darwin%208.0.1%29&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-twitter"></i></a>
  <a href="https://plus.google.com/share?url=https%3a%2f%2farrjay.github.io%2fposts%2fcopper%2f" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-google-plus"></i></a>
  <a href="http://getpocket.com/edit?url=https%3a%2f%2farrjay.github.io%2fposts%2fcopper%2f&title=Copper%20%28Darwin%208.0.1%29" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><i class="fa fa-get-pocket"></i></a>
</div>

<div class="post-meta-code">
  <div class="desc">
    public string description() {
    <div class="desc">val author = "
    
        <a href="mailto:rbergero@gmail.com">RJ Bergeron</a>
    ";
    </div>
    
    <div class="desc">
      val categories = [
      
      
      <a href="https://arrjay.github.io//categories/esx">"esx"</a>
      
      <a href="https://arrjay.github.io//categories/darwin">"darwin"</a>
      
      <a href="https://arrjay.github.io//categories/crazyoldthings">"crazyoldthings"</a>
      
      ];
    </div>
    
    }
  </div>
  <div class="desc">
    public string tags() {
      <div class="desc">
        val tags = [
        
          
          <a href="https://arrjay.github.io/tags/howto">"howto"</a>
          
        
        ];
      </div>
    }
  </div>
</div>


<div class="post-comment">
  
</div>

<div class="paging post-paging">
  
  <a class="left" href="https://arrjay.github.io/posts/hugo/" rel="prev">
    <i class="fa fa-caret-left" aria-hidden="true"></i> <span>Why I chose Hugo for setting up this blog</span>
  </a>
  
  
  <a class="right" href="https://arrjay.github.io/posts/ibm-7043-140/" rel="next">
    <span>IBM 7043 140 (43p)</span> <i class="fa fa-caret-right" aria-hidden="true"></i>
  </a>
  
</div>

<footer class="footer">
  Copyright (C) RJ Bergeron, All Rights Reserved.<br>
  Theme by <a href="https://blog.lulab.net">DONGGEUN,BANG</a>
</footer>

</body>
</html>

